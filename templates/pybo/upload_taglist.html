{% extends 'base.html' %}
{% load pybo_filter %}
{% load static %}
{% block content %}
<div class="container-fluid my-3">
    <h5 class="my-3 border-bottom pb-2">영상 검색</h5>
    <div class="row justify-content-center my-3">
        <div class="col-lg-4 col-md-6 col-8 input-group">
            <input type="text" id="search_input" onkeypress="search_media()" class="form-control kw" value="{{ kw|default_if_none:'' }}" autofocus />
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="btn_search">찾기</button>
            </div>
        </div>
    </div>

    <div class="row" id="upload_list">
        {% if tag_list %}
        {% for tag in tag_list %}
            <a href="/pybo/upload/list?page=1&kw={{ tag }}" class="badge badge-primary">{{ tag }}</a>&nbsp;
        {% endfor %}
        {% else %}
        <div class="justify-content-center my-3">
            <h5 class="my-3 pb-2">결과가 없습니다.</h5>
        </div>
        {% endif %}

    </div>


</div>

{% endblock %}
{% block script %}
<script type='text/javascript'>
$(document).ready(function(){
    // split comma tags
    function split_comma() {
        var list_cnt = $("#upload_list").children().length;
        //alert(list_cnt);
        var html = $('#tag_'+1).html();
        //alert(html);

        for(var i=1; i<=list_cnt; i++){
            var id = $("#upload_list").children('.video').eq(i-1).attr('tag-id');
            //console.log(i + " : " + id);
            var html = $('#tag_'+id).html();
            var tag = $('#tag_'+id).attr('tag');
            var tagArr = tag.split(',');
            var prefix = "";
            //prefix += "<span class='badge badge-success'>V</span> ";
            //prefix += "<span class='badge badge-warning'>I</span> ";
            for(var j=0; j<tagArr.length; j++){
                prefix += "<a href='/pybo/upload/list?page=1&kw="+tagArr[j]+"' class='badge badge-primary'>"+ tagArr[j] + "</a> ";
            }
            $('#tag_'+id).html(prefix+html);
        }
    }

    split_comma();
});
</script>
<script src="{% static 'upload.js' %}"></script>
{% endblock %}